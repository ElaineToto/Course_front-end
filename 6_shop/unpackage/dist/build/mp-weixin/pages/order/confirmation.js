(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/confirmation"],{1290:function(t,e,s){"use strict";var i=s("e251"),a=s.n(i);a.a},"8b2c":function(t,e,s){"use strict";s("6123");var i=n(s("b0ce")),a=n(s("9d34"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(a.default))},"9d34":function(t,e,s){"use strict";s.r(e);var i=s("bc3a"),a=s("fb4a");for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);s("1290");var c=s("2877"),o=Object(c["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=o.exports},bc3a:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",[s("view",{staticClass:"addr",attrs:{eventid:"0f76abf1-0"},on:{tap:t.selectAddress}},[t._m(0),s("view",{staticClass:"right"},[s("view",{staticClass:"tel-name"},[s("view",{staticClass:"name"},[t._v(t._s(t.recinfo.name))]),s("view",{staticClass:"tel"},[t._v(t._s(t.recinfo.tel))])]),s("view",{staticClass:"addres"},[t._v(t._s(t.recinfo.address.region.label)+"\n\t\t\t\t"+t._s(t.recinfo.address.detailed))])])]),s("view",{staticClass:"buy-list"},t._l(t.buylist,function(e,i){return s("view",{key:i,staticClass:"row"},[s("view",{staticClass:"goods-info"},[s("view",{staticClass:"img"},[s("image",{attrs:{src:e.img}})]),s("view",{staticClass:"info"},[s("view",{staticClass:"title"},[t._v(t._s(e.name))]),s("view",{staticClass:"spec"},[t._v("选择"+t._s(e.spec)+" 数量:"+t._s(e.number))]),s("view",{staticClass:"price-number"},[s("view",{staticClass:"price"},[t._v("￥"+t._s(e.price*e.number))]),s("view",{staticClass:"number"})])])])])})),s("view",{staticClass:"order"},[s("view",{staticClass:"row"},[s("view",{staticClass:"left"},[t._v("积分 :")]),s("view",{staticClass:"right"},[t._v("已扣除"+t._s(t.int)+"积分抵扣"+t._s(t._f("toFixed")(t.deduction))+"元")])]),s("view",{staticClass:"row"},[s("view",{staticClass:"left"},[t._v("备注 :")]),s("view",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],attrs:{placeholder:"选填,备注内容",eventid:"0f76abf1-1"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}})])])]),s("view",{staticClass:"detail"},[s("view",{staticClass:"row"},[s("view",{staticClass:"nominal"},[t._v("商品金额")]),s("view",{staticClass:"content"},[t._v("￥"+t._s(t._f("toFixed")(t.goodsPrice)))])]),s("view",{staticClass:"row"},[s("view",{staticClass:"nominal"},[t._v("运费")]),s("view",{staticClass:"content"},[t._v("￥+"+t._s(t._f("toFixed")(t.freight)))])]),s("view",{staticClass:"row"},[s("view",{staticClass:"nominal"},[t._v("积分抵扣")]),s("view",{staticClass:"content"},[t._v("￥-"+t._s(t._f("toFixed")(t.deduction)))])])]),s("view",{staticClass:"blck"}),s("view",{staticClass:"footer"},[s("view",{staticClass:"settlement"},[s("view",{staticClass:"sum"},[t._v("合计:"),s("view",{staticClass:"money"},[t._v("￥"+t._s(t._f("toFixed")(t.sumPrice)))])]),s("view",{staticClass:"btn",attrs:{eventid:"0f76abf1-2"},on:{tap:t.toPay}},[t._v("提交订单")])])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"icon"},[s("image",{attrs:{src:"../../static/img/addricon.png",mode:""}})])}];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return a})},d0fa:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{buylist:[],goodsPrice:0,sumPrice:0,freight:12,note:"",int:1200,deduction:0,recinfo:{id:1,name:"大黑哥",head:"大",tel:"18816881688",address:{region:{label:"广东省-深圳市-福田区",value:[18,2,1],cityCode:"440304"},detailed:"深南大道1111号无名摩登大厦6楼A2"},isDefault:!0}}},onShow:function(){var e=this;t.getStorage({key:"buylist",success:function(t){e.buylist=t.data,e.goodsPrice=0;for(var s=e.buylist.length,i=0;i<s;i++)e.goodsPrice=e.goodsPrice+e.buylist[i].number*e.buylist[i].price;e.deduction=e.int/100,e.sumPrice=e.goodsPrice-e.deduction+e.freight}}),t.getStorage({key:"selectAddress",success:function(s){e.recinfo=s.data,t.removeStorage({key:"selectAddress"})}})},onHide:function(){},onBackPress:function(){this.clearOrder()},filters:{toFixed:function(t){return parseFloat(t).toFixed(2)}},methods:{clearOrder:function(){var e=this;t.removeStorage({key:"buylist",success:function(t){e.buylist=[],console.log("remove buylist success")}})},toPay:function(){for(var e=this,s=[],i=[],a=this.buylist.length,n=0;n<a;n++)s.push(this.buylist[n]),i.push(this.buylist[n].id);0!=s.length?(t.showLoading({title:"正在提交订单..."}),setTimeout(function(){t.setStorage({key:"paymentOrder",data:s,success:function(){t.hideLoading(),t.redirectTo({url:"../pay/payment/payment?amount="+e.sumPrice})}})},1e3)):t.showToast({title:"订单信息有误，请重新购买",icon:"none"})},selectAddress:function(){t.navigateTo({url:"../user/address/address?type=select"})}}};e.default=s}).call(this,s("543d")["default"])},e251:function(t,e,s){},fb4a:function(t,e,s){"use strict";s.r(e);var i=s("d0fa"),a=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);e["default"]=a.a}},[["8b2c","common/runtime","common/vendor"]]]);